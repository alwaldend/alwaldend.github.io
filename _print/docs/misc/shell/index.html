<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="canonical" type="text/html" href="https://alwaldend.com/docs/misc/shell/">
<link rel="alternate" type="application/rss&#43;xml" href="https://alwaldend.com/docs/misc/shell/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Shell | Alwaldend</title>
<meta name="description" content="Deactivate venv in subshell A subshell doesn’t have the deactivate function, so you have to use a workaround:
. .venv/bin/activate ( echo &#34;subshell, still in venv: $(which python)&#34; &amp;&amp; \ . &#34;$(dirname &#34;$(which python)&#34;)/activate&#34; &amp;&amp; \ deactivate &amp;&amp; \ echo &#34;subshell, out of venv: $(which python)&#34; ) A subshell () is different from a subprocess https://unix.stackexchange.com/a/138498
A subshell starts out as an almost identical copy of the original shell process. Under the hood, the shell calls the fork system call1, which creates a new process whose code and memory are copies2. When the subshell is created, there are very few differences between it and its parent. In particular, they have the same variables. Even the $$ special variable keeps the same value in subshells: it’s the original shell’s process ID. Similarly $PPID is the PID of the parent of the original shell.">
<meta property="og:url" content="https://alwaldend.com/docs/misc/shell/">
  <meta property="og:site_name" content="Alwaldend">
  <meta property="og:title" content="Shell">
  <meta property="og:description" content="Deactivate venv in subshell A subshell doesn’t have the deactivate function, so you have to use a workaround:
. .venv/bin/activate ( echo &#34;subshell, still in venv: $(which python)&#34; &amp;&amp; \ . &#34;$(dirname &#34;$(which python)&#34;)/activate&#34; &amp;&amp; \ deactivate &amp;&amp; \ echo &#34;subshell, out of venv: $(which python)&#34; ) A subshell () is different from a subprocess https://unix.stackexchange.com/a/138498
A subshell starts out as an almost identical copy of the original shell process. Under the hood, the shell calls the fork system call1, which creates a new process whose code and memory are copies2. When the subshell is created, there are very few differences between it and its parent. In particular, they have the same variables. Even the $$ special variable keeps the same value in subshells: it’s the original shell’s process ID. Similarly $PPID is the PID of the parent of the original shell.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:modified_time" content="2000-01-01T03:00:00+03:00">

  <meta itemprop="name" content="Shell">
  <meta itemprop="description" content="Deactivate venv in subshell A subshell doesn’t have the deactivate function, so you have to use a workaround:
. .venv/bin/activate ( echo &#34;subshell, still in venv: $(which python)&#34; &amp;&amp; \ . &#34;$(dirname &#34;$(which python)&#34;)/activate&#34; &amp;&amp; \ deactivate &amp;&amp; \ echo &#34;subshell, out of venv: $(which python)&#34; ) A subshell () is different from a subprocess https://unix.stackexchange.com/a/138498
A subshell starts out as an almost identical copy of the original shell process. Under the hood, the shell calls the fork system call1, which creates a new process whose code and memory are copies2. When the subshell is created, there are very few differences between it and its parent. In particular, they have the same variables. Even the $$ special variable keeps the same value in subshells: it’s the original shell’s process ID. Similarly $PPID is the PID of the parent of the original shell.">
  <meta itemprop="dateModified" content="2000-01-01T03:00:00+03:00">
  <meta itemprop="wordCount" content="408">
  <meta itemprop="keywords" content="Misc">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Shell">
  <meta name="twitter:description" content="Deactivate venv in subshell A subshell doesn’t have the deactivate function, so you have to use a workaround:
. .venv/bin/activate ( echo &#34;subshell, still in venv: $(which python)&#34; &amp;&amp; \ . &#34;$(dirname &#34;$(which python)&#34;)/activate&#34; &amp;&amp; \ deactivate &amp;&amp; \ echo &#34;subshell, out of venv: $(which python)&#34; ) A subshell () is different from a subprocess https://unix.stackexchange.com/a/138498
A subshell starts out as an almost identical copy of the original shell process. Under the hood, the shell calls the fork system call1, which creates a new process whose code and memory are copies2. When the subshell is created, there are very few differences between it and its parent. In particular, they have the same variables. Even the $$ special variable keeps the same value in subshells: it’s the original shell’s process ID. Similarly $PPID is the PID of the parent of the original shell.">
<link rel="preload" href="/scss/main.min.988a146c65ef793ae6145654705b7a4aca318d43123c51df956be40671e18198.css" as="style" integrity="sha256-mIoUbGXveTrmFFZUcFt6SsoxjUMSPFHflWvkBnHhgZg=" crossorigin="anonymous">
<link href="/scss/main.min.988a146c65ef793ae6145654705b7a4aca318d43123c51df956be40671e18198.css" rel="stylesheet" integrity="sha256-mIoUbGXveTrmFFZUcFt6SsoxjUMSPFHflWvkBnHhgZg=" crossorigin="anonymous">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name">Alwaldend</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/docs/"><span>Docs</span></a>
      </li>
      <li class="td-light-dark-menu nav-item dropdown">
        <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="check2" viewBox="0 0 16 16">
    <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
  </symbol>
  <symbol id="circle-half" viewBox="0 0 16 16">
    <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
  </symbol>
  <symbol id="moon-stars-fill" viewBox="0 0 16 16">
    <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
    <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
  </symbol>
  <symbol id="sun-fill" viewBox="0 0 16 16">
    <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
  </symbol>
</svg>

<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center"
        id="bd-theme"
        type="button"
        aria-expanded="false"
        data-bs-toggle="dropdown"
        data-bs-display="static"
        aria-label="Toggle theme (auto)">
  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg>
</button>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#sun-fill"></use></svg>
      Light
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"></use></svg>
      Dark
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
      <svg class="bi me-2 opacity-50"><use href="#circle-half"></use></svg>
      Auto
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
</ul>

      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.a01af7848767ae5ec59071d4d461799a.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
<div class="td-content">
	<h1>Shell</h1>
	
	<header class="article-meta">
		<div class="taxonomy taxonomy-terms-article taxo-categories">
  <h5 class="taxonomy-title">Categories:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="https://alwaldend.com/categories/misc/" data-taxonomy-term="misc"><span class="taxonomy-label">Misc</span></a></li>
    </ul>
</div>

</header>
	<h2 id="deactivate-venv-in-subshell">Deactivate venv in subshell<a class="td-heading-self-link" href="#deactivate-venv-in-subshell" aria-label="Heading self-link"></a></h2>
<p>A subshell doesn&rsquo;t have the <code>deactivate</code> function, so you have to use a
workaround:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>. .venv/bin/activate
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;subshell, still in venv: </span><span style="color:#66d9ef">$(</span>which python<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    . <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>dirname <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>which python<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">/activate&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    deactivate <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    echo <span style="color:#e6db74">&#34;subshell, out of venv: </span><span style="color:#66d9ef">$(</span>which python<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>
</span></span></code></pre></div><h2 id="a-subshell--is-different-from-a-subprocess">A subshell <code>()</code> is different from a subprocess<a class="td-heading-self-link" href="#a-subshell--is-different-from-a-subprocess" aria-label="Heading self-link"></a></h2>
<p><a href="https://unix.stackexchange.com/a/138498">https://unix.stackexchange.com/a/138498</a></p>
<p>A subshell starts out as an almost identical copy of the original shell process.
Under the hood, the shell calls the fork system call1, which creates a new
process whose code and memory are copies2. When the subshell is created, there
are very few differences between it and its parent. In particular, they have the
same variables. Even the $$ special variable keeps the same value in subshells:
it&rsquo;s the original shell&rsquo;s process ID. Similarly $PPID is the PID of the parent
of the original shell.</p>
<p>A few shells change a few variables in the subshell. Bash ≥4.0 sets BASHPID to
the PID of the shell process, which changes in subshells. Bash, zsh and mksh
arrange for $RANDOM to yield different values in the parent and in the subshell.
But apart from built-in special cases like these, all variables have the same
value in the subshell as in the original shell, the same export status, the same
read-only status, etc. All function definitions, alias definitions, shell
options and other settings are inherited as well.</p>
<p>A subshell created by (…) has the same file descriptors as its creator. Some
other means of creating subshells modify some file descriptors before executing
user code; for example, the left-hand side of a pipe runs in a subshell3 with
standard output connected to the pipe. The subshell also starts out with the
same current directory, the same signal mask, etc. One of the few exceptions is
that subshells do not inherit custom traps: ignored signals (trap &rsquo;&rsquo; SIGNAL)
remain ignored in the subshell, but other traps (trap CODE SIGNAL) are reset to
the default action4.</p>
<p>A subshell is thus different from executing a script. A script is a separate
program. This separate program might coincidentally be also a script which is
executed by the same interpreter as the parent, but this coincidence doesn&rsquo;t
give the separate program any special visibility on internal data of the parent.
Non-exported variables are internal data, so when the interpreter for the child
shell script is executed, it doesn&rsquo;t see these variables. Exported variables,
i.e. environment variables, are transmitted to executed programs.</p>

	
</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        
      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        
Built with Hugo <a href="/hugo_env.txt">0.152.2</a>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.bbd51c4d8821b00d332d12d5eb4b11de66b17866799c8a262d5fea4c4eee94d0.js" integrity="sha256-u9UcTYghsA0zLRLV60sR3maxeGZ5nIomLV/qTE7ulNA=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
